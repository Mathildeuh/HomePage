<!doctype html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" type="image/x-icon" href="epitech-eu.svg" />
        <title>Dashboard Epitech</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
                font-family: Arial, sans-serif;
                background-color: #1e1e1e;
                background-image: url("./c3uhsgo1vx541.jpg");
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                color: #d4d4d4;
                padding: 20px;
            }

            .search-bar {
                width: 100%;
                max-width: 400px;
                display: flex;
                align-items: center;
                background-color: #3c3c3c;
                border-radius: 8px;
                padding: 5px 10px;
                margin-bottom: 20px;
                transition: transform 0.2s ease;
            }

            .search-bar.focused {
                transform: translateY(-100px) scale(2);
            }

            .search-bar img {
                width: 24px;
                height: 24px;
                margin-right: 10px;
            }

            .search-bar input[type="text"] {
                width: 100%;
                padding: 10px;
                border: none;
                border-radius: 8px;
                outline: none;
                font-size: 16px;
                color: #d4d4d4;
                background-color: transparent;
            }

            .bubble {
                background-color: rgba(37, 37, 38, 0.95);
                border-radius: 10px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                width: 100%;
                max-width: 400px;
                overflow: hidden;
                position: relative;
            }

            .content {
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 20px;
                width: 100%;
                position: relative;
            }

            .epitech-logo {
                width: 80px;
                height: 80px;
                margin: 20px;
                border-radius: 10px;
                object-fit: contain;
            }

            .connection-status {
                position: absolute;
                top: 20px;
                right: 20px;
                width: 32px;
                height: 32px;
                z-index: 1000;
                cursor: default; /* Force le curseur par défaut */
            }

            .connection-status svg {
                transition: transform 0.3s ease;
            }

            .connection-status:hover svg {
                transform: scale(1.2);
            }

            .online {
                color: #22c55e;
            }

            .offline {
                color: #ef4444;
            }

            .favorite-sites {
                display: flex;
                flex-direction: column;
                width: 100%;
                gap: 10px;
                max-height: 400px;
                overflow-y: auto;
                padding: 10px;
            }

            .favorite-sites::-webkit-scrollbar {
                width: 8px;
            }

            .favorite-sites::-webkit-scrollbar-thumb {
                background-color: #3c3c3c;
                border-radius: 4px;
            }

            .favorite-sites::-webkit-scrollbar-track {
                background-color: #252526;
            }

            .favorite-site {
                display: flex;
                align-items: center;
                padding: 12px 16px;
                background-color: #3c3c3c;
                border-radius: 8px;
                text-decoration: none;
                color: #d4d4d4;
                transition: all 0.2s ease;
            }

            .favorite-site:hover {
                background-color: #4c4c4c;
                transform: translateX(5px);
            }

            .favorite-site img {
                width: 24px;
                height: 24px;
                margin-right: 12px;
                object-fit: contain;
            }

            .favorite-site-content {
                display: flex;
                align-items: center;
                font-size: 16px;
                font-weight: 500;
            }

            @media (max-width: 480px) {
                .search-bar,
                .bubble {
                    width: 90%;
                }
            }
        </style>
    </head>
    <body>
        <!-- Barre de recherche Google -->
        <form
            class="search-bar"
            action="https://www.google.com/search"
            method="get"
        >
            <img src="https://www.google.com/favicon.ico" alt="Google Logo" />
            <input
                type="text"
                name="q"
                placeholder="Rechercher sur Google..."
                autocomplete="off"
            />
        </form>

        <!-- Bulle principale -->
        <div class="bubble">
            <div class="content">
                <!-- Logo Epitech -->
                <img
                    src="epitech-eu.svg"
                    alt="Logo Epitech"
                    class="epitech-logo"
                />

                <!-- Indicateur de connexion -->
                <div id="connection-icon" class="connection-status">
                    <svg
                        viewBox="0 0 24 24"
                        width="32"
                        height="32"
                        fill="currentColor"
                    >
                        <path
                            class="online"
                            d="M12 3C7.95 3 4.21 4.34 1.2 6.6L3 9C5.5 7.12 8.62 6 12 6C15.38 6 18.5 7.12 21 9L22.8 6.6C19.79 4.34 16.05 3 12 3M12 9C9.3 9 6.81 9.89 4.8 11.4L6.6 13.8C8.1 12.67 9.97 12 12 12C14.03 12 15.9 12.67 17.4 13.8L19.2 11.4C17.19 9.89 14.7 9 12 9M12 15C10.65 15 9.4 15.45 8.4 16.2L12 21L15.6 16.2C14.6 15.45 13.35 15 12 15Z"
                        />
                        <path
                            class="offline"
                            style="display: none"
                            d="M12 3C7.95 3 4.21 4.34 1.2 6.6L3 9C5.5 7.12 8.62 6 12 6C15.38 6 18.5 7.12 21 9L22.8 6.6C19.79 4.34 16.05 3 12 3M12 9C9.3 9 6.81 9.89 4.8 11.4L6.6 13.8C8.1 12.67 9.97 12 12 12C14.03 12 15.9 12.67 17.4 13.8L19.2 11.4C17.19 9.89 14.7 9 12 9M12 15C10.65 15 9.4 15.45 8.4 16.2L12 21L15.6 16.2C14.6 15.45 13.35 15 12 15M2 3.27L3.28 2L22 20.72L20.73 22L2 3.27Z"
                        />
                    </svg>
                </div>

                <!-- Sites favoris -->
                <div class="favorite-sites">
                    <!-- <a href="#" onclick="launchApp()" class="favorite-site">
                        <div class="favorite-site-content">
                            <img
                                src="./vscode.png"
                                alt="VSCode  Logo"
                            />
                            Lancer VSCode
                        </div>
                    </a> -->

                    <a href="https://my.epitech.eu" class="favorite-site">
                        <div class="favorite-site-content">
                            <img
                                src="https://my.epitech.eu/favicon.png"
                                alt="My Epitech Logo"
                            />
                            My Epitech
                        </div>
                    </a>
                    <a href="https://intra.epitech.eu" class="favorite-site">
                        <div class="favorite-site-content">
                            <img
                                src="epitech-eu.svg"
                                alt="Intra Epitech Logo"
                            />
                            Intra Epitech
                        </div>
                    </a>
                    <a
                        href="https://github.com/EpitechPGEPromo2029"
                        class="favorite-site"
                    >
                        <div class="favorite-site-content">
                            <img
                                src="https://github.com/favicon.ico"
                                alt="GitHub Logo"
                            />
                            GitHub Epitech
                        </div>
                    </a>
                    <a
                        href="https://outlook.office.com/mail/"
                        class="favorite-site"
                    >
                        <div class="favorite-site-content">
                            <img
                                src="https://outlook.office.com/favicon.ico"
                                alt="Outlook Logo"
                            />
                            Outlook Epitech
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <script>
            function updateConnectionStatus() {
                const connectionIcon =
                    document.getElementById("connection-icon");
                const onlinePath = connectionIcon.querySelector(".online");
                const offlinePath = connectionIcon.querySelector(".offline");

                if (navigator.onLine) {
                    onlinePath.style.display = "block";
                    offlinePath.style.display = "none";
                    connectionIcon.setAttribute("title", "Connecté");
                    console.log("Connexion Internet détectée: En ligne");
                } else {
                    onlinePath.style.display = "none";
                    offlinePath.style.display = "block";
                    connectionIcon.setAttribute("title", "Déconnecté");
                    console.log("Pas de connexion Internet: Hors ligne");
                }
            }

            // Initialization au chargement
            window.addEventListener("load", updateConnectionStatus);

            // Surveillance des changements de connexion
            window.addEventListener("online", updateConnectionStatus);
            window.addEventListener("offline", updateConnectionStatus);

            // Ajout d'animations pour la barre de recherche
            const searchInput = document.querySelector(".search-bar input");
            searchInput.addEventListener("focus", () => {
                searchInput.parentElement.classList.add("focused");
            });
            searchInput.addEventListener("blur", () => {
                searchInput.parentElement.classList.remove("focused");
            });

            function launchApp() {
                fetch("http://localhost:3001/launch-app")
                    .then((response) => response.text())
                    .then((message) => {
                        alert(message);
                    })
                    .catch((error) => {
                        console.error("Erreur lors de la requête :", error);
                        alert("Impossible de lancer l'application.");
                    });
            }
        </script>
    </body>
</html>
